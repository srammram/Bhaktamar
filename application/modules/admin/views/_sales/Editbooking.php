<link href="<?php echo base_url('assets/admin/plugins/iCheck/all.css')?>" rel="stylesheet" type="text/css" />
<!--<link rel="stylesheet" href="<?php echo base_url('assets/admin')?>/dist/css/bootstrap-3.3.2.min.css" type="text/css">-->
<!--<script type="text/javascript" src="<?php echo base_url('assets/admin')?>/dist/js/jquery-2.1.3.min.js"></script>-->
<!--<link rel="stylesheet" href="<?php echo base_url('assets/admin')?>/dist/js/bootstrap-3.3.2.min.js" type="text/css">-->
<link rel="stylesheet" href="<?php echo base_url('assets/admin')?>/dist/css/bootstrap-multiselect.css" type="text/css">
<script type="text/javascript" src="<?php echo base_url('assets/admin')?>/dist/js/bootstrap-multiselect.js"></script>

<style>
	
.col-xs-offset-right-12 {
  margin-right: 100%;
}
.col-xs-offset-right-11 {
  margin-right: 91.66666667%;
}
.col-xs-offset-right-10 {
  margin-right: 83.33333333%;
}
.col-xs-offset-right-9 {
  margin-right: 75%;
}
.col-xs-offset-right-8 {
  margin-right: 66.66666667%;
}
.col-xs-offset-right-7 {
  margin-right: 58.33333333%;
}
.col-xs-offset-right-6 {
  margin-right: 50%;
}
.col-xs-offset-right-5 {
  margin-right: 41.66666667%;
}
.col-xs-offset-right-4 {
  margin-right: 33.33333333%;
}
.col-xs-offset-right-3 {
  margin-right: 25%;
}
.col-xs-offset-right-2 {
  margin-right: 16.66666667%;
}
.col-xs-offset-right-1 {
  margin-right: 8.33333333%;
}
.col-xs-offset-right-0 {
  margin-right: 0;
}
@media (min-width: 768px) {
  .col-sm-offset-right-12 {
    margin-right: 100%;
  }
  .col-sm-offset-right-11 {
    margin-right: 91.66666667%;
  }
  .col-sm-offset-right-10 {
    margin-right: 83.33333333%;
  }
  .col-sm-offset-right-9 {
    margin-right: 75%;
  }
  .col-sm-offset-right-8 {
    margin-right: 66.66666667%;
  }
  .col-sm-offset-right-7 {
    margin-right: 58.33333333%;
  }
  .col-sm-offset-right-6 {
    margin-right: 50%;
  }
  .col-sm-offset-right-5 {
    margin-right: 41.66666667%;
  }
  .col-sm-offset-right-4 {
    margin-right: 33.33333333%;
  }
  .col-sm-offset-right-3 {
    margin-right: 25%;
  }
  .col-sm-offset-right-2 {
    margin-right: 16.66666667%;
  }
  .col-sm-offset-right-1 {
    margin-right: 8.33333333%;
  }
  .col-sm-offset-right-0 {
    margin-right: 0;
  }
}
@media (min-width: 992px) {
  .col-md-offset-right-12 {
    margin-right: 100%;
  }
  .col-md-offset-right-11 {
    margin-right: 91.66666667%;
  }
  .col-md-offset-right-10 {
    margin-right: 83.33333333%;
  }
  .col-md-offset-right-9 {
    margin-right: 75%;
  }
  .col-md-offset-right-8 {
    margin-right: 66.66666667%;
  }
  .col-md-offset-right-7 {
    margin-right: 58.33333333%;
  }
  .col-md-offset-right-6 {
    margin-right: 50%;
  }
  .col-md-offset-right-5 {
    margin-right: 41.66666667%;
  }
  .col-md-offset-right-4 {
    margin-right: 33.33333333%;
  }
  .col-md-offset-right-3 {
    margin-right: 25%;
  }
  .col-md-offset-right-2 {
    margin-right: 16.66666667%;
  }
  .col-md-offset-right-1 {
    margin-right: 8.33333333%;
  }
  .col-md-offset-right-0 {
    margin-right: 0;
  }
}
@media (min-width: 1200px) {
  .col-lg-offset-right-12 {
    margin-right: 100%;
  }
  .col-lg-offset-right-11 {
    margin-right: 91.66666667%;
  }
  .col-lg-offset-right-10 {
    margin-right: 83.33333333%;
  }
  .col-lg-offset-right-9 {
    margin-right: 75%;
  }
  .col-lg-offset-right-8 {
    margin-right: 66.66666667%;
  }
  .col-lg-offset-right-7 {
    margin-right: 58.33333333%;
  }
  .col-lg-offset-right-6 {
    margin-right: 50%;
  }
  .col-lg-offset-right-5 {
    margin-right: 41.66666667%;
  }
  .col-lg-offset-right-4 {
    margin-right: 33.33333333%;
  }
  .col-lg-offset-right-3 {
    margin-right: 25%;
  }
  .col-lg-offset-right-2 {
    margin-right: 16.66666667%;
  }
  .col-lg-offset-right-1 {
    margin-right: 8.33333333%;
  }
  .col-lg-offset-right-0 {
    margin-right: 0;
  }
}
	
</style>
<style>
	#exTab1 .tab-content {
  color : #333;;
  background-color: #efefef;
  padding : 5px 15px;
}
	#exTab1 .nav-pills > li > a {
  border-radius: 0;
}
	.client_s h3{text-decoration: underline;font-weight: 500;margin-bottom: 25px;}
	.client_s .form-control{border-radius: 0px;}
	.client_s .btn-primary{border-radius: 0px;}
/*	*/
	.wizard {
    margin: 20px auto;
    background: #fff;
}

.wizard .nav-tabs {
    position: relative;
    margin: 40px auto;
    margin-bottom: 0;
    border-bottom-color: #e0e0e0;
}
.wizard .tab-content{background-color: #efefef;padding: 15px 15px;}
.wizard > div.wizard-inner {
    position: relative;
}

.connecting-line {
    height: 2px;
    background: #e0e0e0;
    position: absolute;
    width: 70%;
    margin: 0 auto;
    left: 0;
    right: 0;
    top: 50%;
    z-index: 1;
}

.wizard .nav-tabs > li.active > a, .wizard .nav-tabs > li.active > a:hover, .wizard .nav-tabs > li.active > a:focus {
    color: #555555;
    cursor: default;
    border: 0;
    border-bottom-color: transparent;
}

span.round-tab {
    width: 80px;
    height: 45px;
    line-height: 43px;
    display: inline-block;
    border-radius: 0px;
    background: #fff;
    border: 2px solid #e0e0e0;
    z-index: 2;
    position: absolute;
    left: 0;
    text-align: center;
    font-size: 18px;
}
span.round-tab i{
    color:#555555;
}
.wizard li.active span.round-tab {
    background: #fff;
    border: 2px solid #337ab7;
    color: #337ab7;
}
.wizard li.active span.round-tab i{
    color: #337ab7;
}

span.round-tab:hover {
    color: #333;
    border: 2px solid #333;
}

.wizard .nav-tabs > li {
    width: 33.33%;
}

.wizard li:after {
    content: " ";
    position: absolute;
    left: 46%;
    opacity: 0;
    margin: 0 auto;
    bottom: 0px;
    border: 5px solid transparent;
    border-bottom-color: #337ab7;
    transition: 0.1s ease-in-out;
}

.wizard li.active:after {
    content: " ";
    position: absolute;
    left: 46%;
    opacity: 1;
    margin: 0 auto;
    bottom: 0px;
    border: 10px solid transparent;
    border-bottom-color: #337ab7;
}

.wizard .nav-tabs > li a {
    width: 80px;
    height: 43px;
    margin: 20px auto;
    border-radius: 0px;
    padding: 0;
}

.wizard .nav-tabs > li a:hover {
    background: transparent;
}

.wizard .tab-pane {
    position: relative;
    padding-top: 50px;
}

.wizard h3 {
    margin-top: 0;
}

@media( max-width : 585px ) {
    .wizard {
        width: 90%;
        height: auto !important;
    }

    span.round-tab {
        font-size: 16px;
        width: 50px;
        height: 50px;
        line-height: 50px;
    }

    .wizard .nav-tabs > li a {
        width: 50px;
        height: 50px;
        line-height: 50px;
    }

    .wizard li.active:after {
        content: " ";
        position: absolute;
        left: 35%;
    }
}
[type="radio"]:checked,
[type="radio"]:not(:checked) {
    position: absolute;
    left: -9999px;
}
[type="radio"]:checked + label,
[type="radio"]:not(:checked) + label
{
    position: relative;
    padding-left: 28px;
    cursor: pointer;
    line-height: 20px;
    display: inline-block;
    color: #666;
}
[type="radio"]:checked + label:before,
[type="radio"]:not(:checked) + label:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 18px;
    height: 18px;
    border: 1px solid #ddd;
    border-radius: 100%;
    background: #337ab7;
}
[type="radio"]:checked + label:after,
[type="radio"]:not(:checked) + label:after {
    content: '';
    width: 8px;
    height: 8px;
    background: #fff;
    position: absolute;
    top: 5px;
    left: 5px;
    border-radius: 100%;
    -webkit-transition: all 0.2s ease;
    transition: all 0.2s ease;
}
[type="radio"]:not(:checked) + label:after {
    opacity: 0;
    -webkit-transform: scale(0);
    transform: scale(0);
}
[type="radio"]:checked + label:after {
    opacity: 1;
    -webkit-transform: scale(1);
    transform: scale(1);
}
	
	
.range-slider__range {
  -webkit-appearance: none;
  width: calc(100% - (73px));
  height: 10px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
  margin: 0;
	display: inline-block!important;
	width: 50%!important;
}
.range-slider__range::-webkit-slider-thumb {
  -webkit-appearance: none;
          appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background .15s ease-in-out;
}
.range-slider__range::-webkit-slider-thumb:hover {
  background: #1abc9c;
}
.range-slider__range:active::-webkit-slider-thumb {
  background: #1abc9c;
}
.range-slider__range::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background .15s ease-in-out;
}
.range-slider__range::-moz-range-thumb:hover {
  background: #1abc9c;
}
.range-slider__range:active::-moz-range-thumb {
  background: #1abc9c;
}
.range-slider__range:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff, 0 0 0 6px #1abc9c;
}

.range-slider__value {
  display: inline-block;
  position: relative;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

::-moz-range-track {
  background: #d7dcdf;
  border: 0;
}

input::-moz-focus-inner,
input::-moz-focus-outer {
  border: 0;
}
	
.payment_s .table tr td{border: none;}
	.client_s .table tr th{background-color: #ccc;}
	</style>
<style>
.error{
    color: #FF0000;
}
</style>    
  <?php   $seg= $this->uri->segment(5);?>
<section class="content-header">
          <h1>
            <?php echo $page_title; ?>
           </h1>
          <ol class="breadcrumb">
            <li><a href="<?php echo site_url('admin/dashboard') ?>"><i class="fa fa-dashboard"></i> <?php echo lang('dashboard')?></a></li>
			<li><a href="<?php echo site_url('admin/sales/Sales') ?>"> <?php echo lang('Sales')?> </a></li>
            <li class="active"><?php echo (empty($seg))?lang('add'):lang('edit');?></li>
          </ol>
</section>
<div class="clearfix"></div>
	<section class="content">
		  <div class="row">
            <div class="col-xs-12">
              <div class="box">
			  	 <div class="box-header">
                  <h3 class="box-title"><?php echo lang('Booking_form'); ?></h3>
                </div><!-- /.box-header -->
                <div class="box-body">
                <form method="post" action="<?php echo site_url('admin/sales/Sales/editBooking/'.$booking_id); ?>" enctype="multipart/form-data" id="enquiryform">	
					
				<section class="booking_add">
							<div class="col-sm-12 col-xs-12">
							<div class="wizard">
            					<div class="wizard-inner">
                				<div class="connecting-line"></div>
									<ul class="nav nav-tabs" role="tablist">
										<li role="presentation" class="active">
											<a href="#step1" data-toggle="tab" aria-controls="step1" role="tab" title="Step 1">
												<span class="round-tab">
													Step1
												</span>
											</a>
										</li>
										<li role="presentation" class="disabled">
											<a href="#step2" data-toggle="tab" aria-controls="step2" role="tab" title="Step 2">
												<span class="round-tab">
													step2
												</span>
											</a>
										</li>
										<li role="presentation" class="disabled">
											<a href="#complete" data-toggle="tab" aria-controls="complete" role="tab" title="Complete">
												<span class="round-tab">
													Step3
												</span>
											</a>
										</li>
									</ul>
            					</div>

								
									<div class="tab-content">
										<div class="tab-pane active" role="tabpanel" id="step1">
											<div class="col-sm-6 col-sm-offset-right-6 client_s">
								  				<h3>Select Client</h3>
								  				
								  					<div class="form-group col-sm-12">
								  						<label class="control-label col-sm-5">Booking Date</label>
								  						<div class="col-sm-7">
								  							<input type="text" placeholder="Date" name="booking_date" id="booking_date" class="form-control datepicker" value="<?php if(isset($booking->booking_date)){ echo $booking->booking_date;  } ?>">
								  						</div>
								  					</div>
								  					<div class="form-group col-sm-12">
								  						<label class="control-label col-sm-5">Client</label>
								  						<div class="col-sm-7">
								  							<select name="client_id" id="client_id" onchange="get_clients(this.value)" class="form-control">
                                                             <option value="">Select</option>
								  								<?php 
																if(isset($clients)){
																	foreach($clients as $client)
																	{
																	?>
																<option value="<?php echo $client->customer_id ?>" <?php  if(isset($booking->client_id)){ echo $client->customer_id == $booking->client_id ?'selected':'' ;  } ?> ><?php  echo $client->customer_name  ?></option>	
																		<?php
																	}
																}
																?>
								  							</select>
								  						</div>
								  					</div>
								  					
								  			</div>
								  			<div class="col-sm-10 col-sm-offset-right-2 client_s">
												<h3>Fill Up Project Details</h3>
												<div class="col-sm-6 client_s">
													<div class="form-group col-sm-12">
														<label class="control-label col-sm-5">Project Name</label>
														<div class="col-sm-7">
															<select name="project_id" id="project_id" class="form-control"  onchange="get_projectWiseBuilding(<?php echo $booking->project_id ?>)" >
																<option value="">Select</option>
																<?php 
                                                         if(isset($projects)){
                                                               foreach($projects as $project){
                                                                  ?>
                                                                    <option value="<?php  echo $project->id   ?>"<?php  if(isset($booking->project_id)){ echo $booking->project_id == $project->id ?'selected':'' ;  } ?> ><?php  echo $project->Name  ?></option>	
                                                                   <?php
                                                                        }
                                                                             }
                                                                    ?>
															</select>
														</div>
													</div>
													<div class="form-group col-sm-12">
														<label class="control-label col-sm-5">Building</label>
														<div class="col-sm-7">
															<select name="building_id" id="building_id" class="form-control" onchange="get_house(this.value)"  >
																<option value="">Select</option>
																 <?php 
                                                        if(isset($buildings)){
                                                               foreach($buildings as $building){
                                                           ?>
                                                          <option value="<?php  echo $building->bldid   ?>"<?php  if(isset($booking->building_id)){ echo $booking->building_id == $building->bldid ?'selected':'' ;  } ?> ><?php  echo $building->name  ?></option>  
                                                <?php
                                          }
                                    }
                                ?>
															</select>
														</div>
													</div>
													<div class="form-group col-sm-12">
														<label class="control-label col-sm-5">Floors</label>
														<div class="col-sm-7">
															<select name="floor_id" id="floor_id" onchange="get_flats(this.value)" class="form-control">
																<option value="">Select</option>
                                                     <?php 
                                                        if(isset($floors)){
                                                               foreach($floors as $floor){
                                                           ?>
                                                          <option value="<?php  echo $floor->id   ?>"<?php  if(isset($booking->floor_id)){ echo $booking->floor_id == $floor->id ?'selected':'' ;  } ?> ><?php  echo $floor->name  ?></floor>  
                                                <?php
                                          }
                                    }
                                ?>
															</select>
														</div>
													</div>
													<div class="form-group col-sm-12">
														<label class="control-label col-sm-5">House</label>
														<div class="col-sm-7">
															<select name="unit_id" id="unit_id" class="form-control" onchange="get_unitvalue(this.value)" >
																<option value="">Select</option>
                                <?php 
                                    if(isset($units)){
                                          foreach($units as $unit){
                                          ?>
                                      <option value="<?php  echo $unit->uid   ?>"<?php  if(isset($booking->unit_id)){ echo $booking->unit_id == $unit->uid ?'selected':'' ;  } ?> ><?php  echo $unit->unit_no  ?></unit>  
                                              <?php
                                          }
                                    }
                                ?>                                
															</select>
														</div>
													</div>
                          <div class="form-group col-sm-12">
														<label class="control-label col-sm-5"> Type</label>
														<div class="col-sm-7">
															<select name="unit_type" id="unit_type" class="form-control">
																<option value="">Select</option>
																 <?php 
                                    if(isset($unit_type)){
                                          foreach($unit_type as $ut){
                                          ?>
                                      <option value="<?php  echo $ut->id   ?>"<?php  if(isset($booking->UnitType)){ echo $booking->UnitType == $ut->id ?'selected':'' ;  } ?> ><?php  echo $ut->UnitType  ?></unit>  
                                              <?php
                                          }
                                    }
                                ?>   
															</select>
														</div>
													</div>
													
												</div>
												<div class="col-sm-6">
													<div class="form-group col-sm-12">
														<label class="control-label col-sm-5">Ref No</label>
														<div class="col-sm-7">
															<input type="text" name="ref_no" id="ref_no" value="<?php if(isset($booking->ref_no)){ echo $booking->ref_no; } ?>" readonly class="form-control">
														</div>
													</div>
													
													<div class="form-group col-sm-12">
														<label class="control-label col-sm-5">Description</label>
														<div class="col-sm-7"> 
															<textarea rows="3" name="description" id="description"  style="width: 100%;"><?php if(isset($booking->description)){ echo ($booking->description); } ?></textarea>
														</div>
													</div>
												</div>
											</div>
									<!-- 	<div class="col-sm-6 col-sm-offset-5">
												
												  <span>
													<input type="radio" id="test1" value="1" name="sales_type" <?php  if(isset($booking->sales_type)){ echo $booking->sales_type == 1 ?'checked':'' ; } ?> >
													<label for="test1">Loan</label>
												  </span>
												  <span>
													<input type="radio" id="test2" value="2" name="sales_type" <?php  if(isset($booking->sales_type)){ echo $booking->sales_type == 2 ?'checked':'' ; } ?> >
													<label for="test2">Full Payment</label>
												  </span>

												
											</div> -->
											<div class="col-sm-12">
												<ul class="list-inline pull-right">
													<li><button type="button" class="btn btn-primary next-step">Save and continue</button></li>
												</ul>
											</div>
										</div>
										
										<div class="tab-pane " role="tabpanel" id="step2">
											<div class="col-sm-12 client_s">
												<h3>Fillup Payment Details</h3>
												<div class="col-sm-12">
													<div class="col-sm-3 form-group">
														<label class="control-label">Rate</label>
														<input type="text" name="rate_per_sqft"  value="<?php if(isset($booking->rate_per_sqft)){ echo $booking->rate_per_sqft; } ?>" id="rate_per_sqft" readonly class="form-control">
													</div>
													<div class="col-sm-3 form-group">
														<label class="control-label">Land Length</label>
														<input type="text" name="area_sqft" id="area_sqft" value="<?php if(isset($booking->area_sqft)){ echo $booking->area_sqft; } ?>"  readonly class="form-control">
													</div>
													<div class="col-sm-3 form-group">
														<label class="control-label">Basic Amount</label>
														<input type="text" name="basic_sale_price"  value="<?php if(isset($booking->basic_sale_price)){ echo $booking->basic_sale_price; } ?>" id="basic_sale_price" readonly class="form-control">
													</div>
                                                    
                          <div class="col-sm-3 form-group">
														<label class="control-label">Discount%</label>
														<input type="text" name="discount" id="discount" onchange="get_discount(this.value)"  class="form-control"  value="<?php if(isset($booking->discount)){ echo $booking->discount; } ?>" >
													</div>
													
													<div class="col-sm-2 form-group">
														<label class="control-label">Discount Amount</label>
														<input type="text" name="discount_amt" id="discount_amt" value="<?php if(isset($booking->discount_amt)){ echo $booking->discount_amt; } ?>" readonly class="form-control">
													</div>
													<div class="col-sm-2 form-group">
														<label class="control-label">Total Cost</label>
														<input type="text" name="basic_total_cost" id="basic_total_cost" readonly class="form-control"  value="<?php if(isset($booking_invoice[0]->subtotal)){ echo $booking_invoice[0]->subtotal; } ?>" >
													</div>
												</div>
												<div class="col-sm-12">
													<table class="table table-bordered">
														<thead>
                              	<tr>
                                  	<td>Details</td>
                                      <td>Price</td>
                                      <td>Discount</td>
                                      <td>Subtotal</td>
                                  </tr>
                              </thead>
                              <tbody id="client_details">
                                <?php if($booking_invoice):?>   
                                  <?php $i =0; foreach ($booking_invoice as $invoice):?>
                                  <tr>
                                    <td id="sales_text_item_1"><?php echo  $invoice->name; ?>  <input type="hidden" name="sales_list_item[]" value="<?= $invoice->name ?>" id="sales_list_item_1" > </td>
                                    <td id="sales_text_amount_1"><?php echo  $invoice->price; ?> <input type="hidden" name="sales_list_amount[]" value="<?= $invoice->price ?>" id="sales_list_amount_1" ></td>
                                    <td id="sales_text_discount_1"><?php echo  $invoice->discount_amt; ?> <input type="hidden" name="sales_list_discount[]" value="<?= $invoice->discount_amt ?>" id="sales_list_discount_1" ></td>
                                    <td id="sales_text_total_1"><?php echo  $invoice->subtotal; ?>  <input type="hidden" name="sales_list_total[]" value="<?= $invoice->subtotal ?>" id="sales_list_total_1" ></td>                                   
                                  </tr>
                                  <?php  $i++;endforeach;?>
                                  <?php endif?>
                              
                              </tbody>
							</table>
						</div>
											</div>
											<ul class="list-inline pull-right">
												<li><button type="button" class="btn btn-default prev-step">Previous</button></li>
												<li><button type="button" class="btn btn-primary btn-info-full next-step">Save and continue</button></li>
											</ul>
										</div>
										<div class="tab-pane " role="tabpanel" id="complete">
											<div class="col-sm-12 client_s">
												<h3>Select Payment Plan</h3>
												<div class="col-sm-6 col-sm-offset-right-6 payment_s">
													<table class="table">
													<tbody>
														<tr>
															<td>Total Cost :</td>
															<td><input type="hidden" name="total_cost" id="total_cost" value="<?php
															if(isset($booking->basic_sale_price)){ echo $booking->basic_sale_price - $booking->discount_amt; } ?>"><span id="total_cost_val"><?php
                                                                  
															if(isset($booking->basic_sale_price)){ echo $booking->basic_sale_price - $booking->discount_amt; } ?></span></td>
														</tr>
														<tr>
															<td>Booking Type</td>
															<td>
																  <span>
																	<input type="radio" id="test3" value="1" name="booking_type" <?php  if(isset($booking->booking_type)){ echo $booking->booking_type == 1 ?'checked':'' ; } ?>  >
																	<label for="test3">Conform</label>
																  </span>
																  <span>
																	<input type="radio" id="test4" value="2" name="booking_type" <?php  if(isset($booking->booking_type)){ echo $booking->booking_type == 2 ?'checked':'' ; } ?> >
																	<label for="test4">Holding</label>
																  </span>
															</td>
														</tr>
														<tr>
															<td>Select Payment Type</td>
															<td>
																<select class="form-control" name="payment_type" id="payment_type">
																	<option value="">Select type</option>
																	<option value="1" <?php  if(isset($booking->payment_type)){ echo $booking->payment_type == 1 ?'selected':'' ;  } ?>>Installment Payment</option>
																	<option value="2" <?php  if(isset($booking->payment_type)){ echo $booking->payment_type == 2 ?'selected':'' ;  } ?>>Ready Cash</option>
																</select>
															</td>
														</tr>
														<?php if($booking->isPaid_initialAmount  !=0){  ?>
														<tr class="inital_amttr">
															<td>Initial Amount</td><td><input type="text" value="<?php if(isset($booking->initialAmount)){ echo $booking->initialAmount; } ?>" name="initial_amt" id="initial_amt" readonly class="form-control"></label>
														</tr>
														<?php   }  ?>
													</tbody>
												</table>
												</div>
												<div class="col-sm-12 col-xs-12">
													<div class="well well-sm col-sm-12 col-xs-12">
													<div class="col-sm-3 form-group">
														<label class="control-label">Advance</label>
														<input type="text" name="advance_amt" id="advance_amt" value="<?php if(isset($booking->advance_amt)){ echo $booking->advance_amt; } ?>" onchange="get_advance_amt(this.value)" class="form-control">
													</div>
													<div class="col-sm-3 form-group">
														<label class="control-label">Balance</label>
														<input type="text" name="balance" id="balance" value="<?php if(isset($booking->balance)){ echo $booking->balance; } ?>" readonly class="form-control">
														<input type="hidden"  class="totalbalance" value="<?php if(isset($booking->basic_sale_price)){ echo $booking->basic_sale_price -$booking->discount_amt; } ?>">
													</div>
													<div class="col-sm-3 form-group ">
														<label class="control-label">Duration</label>
														<input type="text" name="emi_period" id="emi_period" onchange="get_emi_period(this.value)" class="form-control" value="<?php if(isset($booking->emi_period)){ echo $booking->emi_period; } ?>" >
													</div>
													<div class="col-sm-3 form-group">
														<label class="control-label">Interest(%)</label>
														<input type="text" name="emi_percentage"  id="emi_percentage" onchange="get_emi_percentage(this.value)" class="form-control" value="<?php if(isset($booking->emi_percentage)){ echo $booking->emi_percentage; } ?>"  >
													</div>
													<div class="col-sm-3 form-group installmentmode">
														<label class="control-label">Moratorium</label>
														<input type="text" name="moratorium"  id="moratorium" onchange="get_moratorium(this.value)" class="form-control allownumericwithoutdecimalpoint" value="<?php if(isset($booking->moratorium)){ echo $booking->moratorium; } ?>" >
													</div>
													<div class="col-sm-3 form-group installmentmode">
														<label class="control-label">Moratorium(%)</label>
														<input type="text" name="moratorium_per" value="<?php if(isset($booking->moratorium_per)){ echo $booking->moratorium_per; } ?>" id="moratorium_per" onchange="get_moratorium_percentage(this.value)" class="form-control allownumericwithdecimalpoint">
													</div>
													<div class="col-sm-3 form-group installmentmode">
														<label class="control-label">Moratorium Amount</label>
														<input type="text" name="moratorium_amt" id="moratorium_amt"  class="form-control " readonly value="<?php if(isset($booking->moratorium_amt)){ echo $booking->moratorium_amt; } ?>">
													</div>
													</div>
												</div>
												<div class="col-sm-12 col-xs-12">
													<table class="table table-bordered">
														<thead>
															<tr>
																<th>NO</th>
																<th>Due Date</th>
																<th>Beginning_Balance</th>
																<th>Per(%)</th>
																<th>Amount</th>
																<th>Principle</th>
																<th>Interest</th>
																<th>Ending_Balance</th>
															</tr>
														</thead>
														<tbody id="emi_calculator">
															<?php if($booking_emi):?>   
                                  <?php $i =0; foreach ($booking_emi as $emi):?>
                                  <tr>
                                    <td><?php echo  $emi->emi_no; ?><input type="hidden" name="emi_no[]" value="<?= $emi->emi_no ?>" id="emi_no_'<?=$i?>'" ></td>
                                    <td><?php echo  $emi->emi_duedate; ?><input type="hidden" name="emi_duedate[]" value="<?= $emi->emi_duedate ?>" id="emi_duedate_'<?=$i?>'" ></td>
									<td><?php echo  $emi->Beginning_Balance; ?><input type="hidden" name="emi_Beginning_Balance[]" value="<?= $emi->Beginning_Balance ?>" id="emi_Beginning_Balance_'<?=$i?>'" ></td>
									<td>
									<?php if($emi->type ==1){ ?>
									<input type="text" onchange="get_moratorium_emi_amt_for_per(this.value)" style="width:42px;" name="percentage[]" value="<?= ($emi->percentage ==0)?'':round(($emi->percentage),1); ?>" id="emi_Beginning_Balance_'<?=$i?>'" >
									<?php   }  ?>
									</td>
                                    <td><?php echo  $emi->emi_amount; ?><input type="hidden" name="emi_amount[]" value="<?= $emi->emi_amount ?>" id="emi_amount_'<?=$i?>'" ></td>   
									<td><?php echo  $emi->Principal; ?><input type="hidden" name="emi_Principle[]" value="<?= $emi->Principal ?>" id="emi_Principle_'<?=$i?>'" ></td>
                                     <td><?php echo  $emi->Interest; ?><input type="hidden" name="emi_Interest[]" value="<?= $emi->Interest ?>" id="emi_Interest_'<?=$i?>'" ></td>
                                     <td><?php echo  $emi->Ending_Balance; ?><input type="hidden" name="emi_Balance[]" value="<?= $emi->Ending_Balance ?>" id="emi_Balance_'<?=$i?>'" >
									 <input type="hidden" name="type[]" value="<?= $emi->type ?>" id="type'<?=$i?>'" >									 
									</td>	
                                  </tr>
                                  <?php $i++; endforeach;?>
                                  <?php endif?>

														</tbody>
													</table>
												</div>
												
											</div>
											<div class="col-sm-12 text-center">
												<ul class="list-inline">
													<li><button type="submit" class="btn btn-primary next-step">Save </button></li>
													<input type="hidden"  id="bookingid" name="bookingid" value="<?php     echo $booking_id; ?>">
												</ul>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
        					</div>
							</div>
				</section>
				</form>
     			 </div><!-- /.box-body -->
              </div><!-- /.box -->

            </div><!-- /.col -->
          </div><!-- /.row -->
        </section>
        <script src="<?php echo base_url('assets/plugin/moment.min.js')?>"></script>
<script src="<?php echo base_url('assets/admin/plugins/daterangepicker/daterangepicker.js')?>"></script>
<script src="<?php echo base_url('assets/admin/plugins/iCheck/icheck.min.js')?>" type="text/javascript"></script>				
<script src="<?php echo base_url('assets/admin/') ?>/plugins/datepicker/bootstrap-datepicker.js"></script>
<script src="<?php echo base_url('assets/admin/plugins')?>/jquery-validation/jquery.validate.min.js"></script>
<script>

 $(function() {
 $('.datepicker').datepicker({
      	todayHighlight: true,
		autoclose: true,
	   format: 'yyyy-mm-dd',
    });
 	$('input').iCheck({
          checkboxClass: 'icheckbox_square-blue',
          radioClass: 'iradio_square-blue',
          increaseArea: '20%' // optional
     });
	      });
</script>
<script>

$('input[type="checkbox"]').on('change', function() {
$('input[type="checkbox"]').not(this).prop('checked', false);
});
</script>

<script>
$(document).ready(function () {
//Initialize tooltips
$('.nav-tabs > li a[title]').tooltip();

//Wizard
$('a[data-toggle="tab"]').on('show.bs.tab', function (e) {

	var $target = $(e.target);

	if ($target.parent().hasClass('disabled')) {
		return false;
	}
});

$(".next-step").click(function (e) {

	var $active = $('.wizard .nav-tabs li.active');
	$active.next().removeClass('disabled');
	nextTab($active);

});
$(".prev-step").click(function (e) {

	var $active = $('.wizard .nav-tabs li.active');
	prevTab($active);

});
});

function nextTab(elem) {
$(elem).next().find('a[data-toggle="tab"]').click();
}
function prevTab(elem) {
$(elem).prev().find('a[data-toggle="tab"]').click();
}
</script>
<script>
var rangeSlider = function(){
var slider = $('.range-slider'),
range = $('.range-slider__range'),
value = $('.range-slider__value');

slider.each(function(){

value.each(function(){
var value = $(this).prev().attr('value');
$(this).html(value);
});

range.on('input', function(){
$(this).next(value).html(this.value);
});
});
};

rangeSlider();
</script>
<script>

</script>